{% extends 'recipes/recipe_base.html' %}
{% block title %}Monthly Planner{% endblock %}
{% block content %}
    {% load static %}
    <div class="form-group recipe-input-container">
        <label>Select a Month: </label>
        <select ng-model="selectedCalendar" ng-options="c.nickname for c in allCalendars" class="form-control input-sm"
                ng-change="get_month_data()"></select>
    </div>
    <h1>{[{ selectedCalendar.nickname }]}</h1>
    <table class="table table-bordered" style="table-layout: fixed;">
        <tr>
            <th>Sunday</th>
            <th>Monday</th>
            <th>Tuesday</th>
            <th>Wednesday</th>
            <th>Thursday</th>
            <th>Friday</th>
            <th>Saturday</th>
        </tr>
        <tr ng-repeat="week_num in [0, 1, 2, 3, 4]" ng-show="week_num < 4 || week_num === 4 && num_weeks === 5">
            <td ng-repeat="day_of_week in [0, 1, 2, 3, 4, 5, 6]">
                <div>
                    <p>{[{ monthly_data.array_data[week_num][day_of_week].date_number }]}</p>
                    <div class="form-group recipe-input-container"
                         ng-show="monthly_data.array_data[week_num][day_of_week].date_number !== '-'">
                        <input type="text"
                               class="form-control recipe-input"
                               ng-class="{'valid_recipe': monthly_data.array_data[week_num][day_of_week]['recipe' + '0'] !== null}"
                               ng-model="monthly_data.array_data[week_num][day_of_week]['recipe' + '0']"
                               id="day{[{ week_num }]}{[{ day_of_week }]}recipe0{[{ 0 }]}input"
                               data-weeknum="{[{ week_num }]}"
                               data-daynum="{[{ day_of_week }]}"
                               data-recipenum="{[{ 0 }]}"
                               bs-options="recipe.id as recipe.title for recipe in recipe_list"
                               placeholder="Enter recipe name..."
                               bs-typeahead>
                    </div>
                    <div class="form-group recipe-input-container"
                         ng-show="monthly_data.array_data[week_num][day_of_week].date_number !== '-'">
                        <input type="text"
                               class="form-control recipe-input"
                               ng-class="{'valid_recipe': monthly_data.array_data[week_num][day_of_week]['recipe' + '1'] !== null}"
                               ng-model="monthly_data.array_data[week_num][day_of_week]['recipe' + '1']"
                               id="day{[{ week_num }]}{[{ day_of_week }]}recipe0{[{ 1 }]}input"
                               data-weeknum="{[{ week_num }]}"
                               data-daynum="{[{ day_of_week }]}"
                               data-recipenum="{[{ 1 }]}"
                               bs-options="recipe.id as recipe.title for recipe in recipe_list"
                               placeholder="Enter recipe name..."
                               bs-typeahead>
                    </div>
                </div>
            </td>
        </tr>
    </table>
{% endblock %}
